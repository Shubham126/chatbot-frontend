{"version":3,"file":"chatbot-sdk.js","sources":["../src/ChatBot.js","../src/index.js"],"sourcesContent":["class ChatBot {\n    constructor(apiKey, options = {}) {\n        this.apiKey = apiKey;\n        // Auto-detect environment for baseUrl\n        const isLocalhost = window.location.hostname === 'localhost' ||\n            window.location.hostname === '127.0.0.1' ||\n            window.location.hostname.includes('127.0.0.1');\n\n        const defaultBaseUrl = isLocalhost ?\n            'http://localhost:3000/api/scrape' :\n            'https://chatflow-ai.onrender.com/api/scrape';\n\n        this.baseUrl = options.baseUrl || defaultBaseUrl;\n        this.isOpen = false;\n        this.currentFileId = null;\n        this.chatHistory = [];\n        this.selectedFileId = null;\n        this.selectedSiteName = null;\n        this.websiteTheme = null;\n\n        // Configuration options - will be loaded from API\n        this.options = {\n            position: 'bottom-right', // Default, will be overridden by API\n            theme: 'default',\n            themeStyle: 'auto', // Will be determined by API\n            title: 'ChatFlow AI Assistant',\n            placeholder: 'Ask me anything about this website...',\n            preselectedSite: null,\n            ...options\n        };\n\n        this.init();\n\n        // Set up periodic refresh to check for configuration changes\n        this.setupConfigRefresh();\n\n        // Add global method for manual refresh\n        window.ChatFlowRefresh = () => {\n            console.log('ðŸ”„ Manual refresh triggered');\n            this.refreshConfiguration();\n        };\n    }\n\n    setupConfigRefresh() {\n        // Check for configuration updates every 2 seconds for faster response\n        this.configRefreshInterval = setInterval(async () => {\n            try {\n                await this.refreshConfiguration();\n            } catch (error) {\n                console.warn('Config refresh failed:', error);\n            }\n        }, 2000);\n\n        // Also refresh when page becomes visible (user switches back to tab)\n        document.addEventListener('visibilitychange', () => {\n            if (!document.hidden) {\n                console.log('ðŸ”„ Page visible, checking for config updates...');\n                this.refreshConfiguration();\n            }\n        });\n\n        // Refresh when window gains focus\n        window.addEventListener('focus', () => {\n            console.log('ðŸ”„ Window focused, checking for config updates...');\n            this.refreshConfiguration();\n        });\n    }\n\n    async refreshConfiguration() {\n        try {\n            const timestamp = new Date().getTime();\n            const response = await fetch(`${this.baseUrl}/sdk-config?t=${timestamp}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'x-api-key': this.apiKey\n                }\n            });\n\n            const data = await response.json();\n\n            if (data.success && data.data) {\n                const newConfig = data.data;\n\n                // Check if configuration has changed\n                const configChanged = this.hasConfigurationChanged(newConfig);\n\n                if (configChanged) {\n                    console.log('âš¡ Configuration changed, updating chatbot immediately...');\n                    await this.applyNewConfiguration(newConfig);\n\n                    // Show brief notification to user\n                    this.showUpdateNotification();\n                }\n            }\n        } catch (error) {\n            // Silently fail refresh attempts to avoid spam\n            console.debug('Config refresh error:', error);\n        }\n    }\n\n    hasConfigurationChanged(newConfig) {\n        if (!this.sdkConfig) return true;\n\n        // Check if selected website changed\n        const oldWebsiteId = this.sdkConfig.selectedWebsite?.id;\n        const newWebsiteId = newConfig.selectedWebsite?.id;\n\n        if (oldWebsiteId !== newWebsiteId) {\n            console.log('ðŸ“ Selected website changed:', oldWebsiteId, '->', newWebsiteId);\n            return true;\n        }\n\n        // Check if theme choice changed\n        const oldThemeChoice = this.sdkConfig.integration?.themeChoice;\n        const newThemeChoice = newConfig.integration?.themeChoice;\n\n        if (oldThemeChoice !== newThemeChoice) {\n            console.log('ðŸŽ¨ Theme choice changed:', oldThemeChoice, '->', newThemeChoice);\n            return true;\n        }\n\n        // Check if theme data changed (for website themes)\n        if (newThemeChoice === 'website') {\n            const oldThemeData = JSON.stringify(this.sdkConfig.themeData || {});\n            const newThemeData = JSON.stringify(newConfig.themeData || {});\n\n            if (oldThemeData !== newThemeData) {\n                console.log('ðŸŽ¨ Theme data changed');\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    async applyNewConfiguration(newConfig) {\n        // Store new configuration\n        this.sdkConfig = newConfig;\n\n        // Update all settings from new configuration\n        if (newConfig.integration.customizations) {\n            const customizations = newConfig.integration.customizations;\n\n            // Update position if changed\n            if (customizations.position && customizations.position !== this.options.position) {\n                this.options.position = customizations.position;\n                // Update widget position class\n                this.widget.className = `chatbot-widget ${this.options.position}`;\n                console.log('ðŸ“ Position updated to:', this.options.position);\n            }\n\n            // Update title if changed\n            if (customizations.title && customizations.title !== this.options.title) {\n                this.options.title = customizations.title;\n                const titleElement = this.widget.querySelector('.chatbot-title');\n                if (titleElement) {\n                    titleElement.textContent = customizations.title;\n                }\n                console.log('ðŸ“ Title updated to:', this.options.title);\n            }\n\n            // Update placeholder if changed\n            if (customizations.placeholder && customizations.placeholder !== this.options.placeholder) {\n                this.options.placeholder = customizations.placeholder;\n                const inputElement = this.widget.querySelector('#chatbot-input');\n                if (inputElement && !inputElement.disabled) {\n                    inputElement.placeholder = customizations.placeholder;\n                }\n                console.log('ðŸ’¬ Placeholder updated to:', this.options.placeholder);\n            }\n        }\n\n        // Update theme settings\n        if (newConfig.integration.themeChoice === 'website' && newConfig.themeData) {\n            this.options.themeStyle = 'website';\n            this.websiteTheme = newConfig.themeData;\n        } else {\n            this.options.themeStyle = 'default';\n            this.websiteTheme = null;\n        }\n\n        // Update selected website\n        if (newConfig.selectedWebsite) {\n            this.currentFileId = newConfig.selectedWebsite.id;\n            this.enableInput();\n            this.clearChat();\n            // NOTE: I am removing calls to updateChatHeader as per previous request\n        } else if (newConfig.availableWebsites.length > 0) {\n            const firstSite = newConfig.availableWebsites[0];\n            this.currentFileId = firstSite.id;\n            this.enableInput();\n            this.clearChat();\n            // NOTE: I am removing calls to updateChatHeader as per previous request\n        } else {\n            this.showNoSitesMessage();\n        }\n\n        // Re-apply styles with new theme\n        this.createStyles();\n\n        console.log('âœ… Configuration updated successfully');\n    }\n\n    showUpdateNotification() {\n        // Notification removed - silent updates\n    }\n\n    async init() {\n        this.createStyles();\n        this.createChatWidget();\n        this.bindEvents();\n\n        // Validate API key and load SDK configuration\n        const isValidKey = await this.validateApiKey();\n        if (isValidKey) {\n            // Load complete SDK configuration from API\n            await this.loadSdkConfiguration();\n        } else {\n            this.showApiKeyError();\n        }\n    }\n\n    async validateApiKey() {\n        try {\n            const response = await fetch(`${this.baseUrl.replace('/scrape', '')}/auth/validate-api-key`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'x-api-key': this.apiKey\n                }\n            });\n\n            const data = await response.json();\n            return data.success;\n        } catch (error) {\n            console.error('Error validating API key:', error);\n            return false;\n        }\n    }\n\n    showApiKeyError() {\n        const messages = this.widget.querySelector('#chatbot-messages');\n        messages.innerHTML = `\n            <div class=\"chatbot-message bot\" style=\"background: #fef2f2; color: #dc2626; border: 1px solid #fecaca;\">\n                <strong>Invalid API Key</strong><br>\n                The provided API key is invalid or has been revoked. Please check your integration settings and ensure you're using a valid API key.\n            </div>\n        `;\n\n        // Disable input\n        const input = this.widget.querySelector('#chatbot-input');\n        const send = this.widget.querySelector('#chatbot-send');\n        input.disabled = true;\n        send.disabled = true;\n        input.placeholder = 'Invalid API key - chatbot disabled';\n\n        // Hide site selector if it exists\n        const selector = this.widget.querySelector('#chatbot-site-selector');\n        if (selector) {\n            selector.style.display = 'none';\n        }\n    }\n\n    createStyles() {\n        // Create CSS custom properties for theming\n        const themeColors = this.getThemeColors();\n        console.log('ðŸŽ¨ Creating styles with theme colors:', themeColors);\n\n        const styles = `\n            :root {\n                --chatbot-primary: ${themeColors.primary};\n                --chatbot-primary-dark: ${themeColors.primaryDark};\n                --chatbot-primary-light: ${themeColors.primaryLight || themeColors.primary};\n                --chatbot-secondary: ${themeColors.secondary};\n                --chatbot-background: ${themeColors.background};\n                --chatbot-text: ${themeColors.text};\n                --chatbot-border: ${themeColors.border};\n                --chatbot-button: ${themeColors.button || themeColors.primary};\n                --chatbot-link: ${themeColors.link || themeColors.primary};\n                --chatbot-accent: ${themeColors.accent || themeColors.primary};\n                --chatbot-user-bg: ${themeColors.userBg};\n                --chatbot-bot-bg: ${themeColors.botBg};\n                --chatbot-header-bg: ${themeColors.headerBg || themeColors.primary};\n                --chatbot-header-text: ${themeColors.headerText || '#ffffff'};\n            }\n            .chatbot-widget {\n                position: fixed; z-index: 10000; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            }\n            .chatbot-widget.bottom-right { bottom: 20px; right: 20px; }\n            .chatbot-widget.bottom-left { bottom: 20px; left: 20px; }\n            .chatbot-widget.top-right { top: 20px; right: 20px; }\n            .chatbot-widget.top-left { top: 20px; left: 20px; }\n            .chatbot-toggle {\n                width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--chatbot-primary) 0%, var(--chatbot-primary-dark) 100%);\n                border: none; cursor: pointer; box-shadow: 0 4px 20px rgba(0,0,0,0.15); display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;\n            }\n            .chatbot-toggle svg { width: 24px; height: 24px; fill: white; }\n            .chatbot-widget .chatbot-container.open ~ .chatbot-toggle {\n                opacity: 0; visibility: hidden; transform: scale(0.8); pointer-events: none;\n            }\n            .chatbot-container {\n                position: absolute; bottom: 0; right: 0; width: 380px; height: 605px; background: var(--chatbot-background);\n                border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); display: flex; flex-direction: column;\n                opacity: 0; visibility: hidden; transform: translateY(20px) scale(0.95); transition: all 0.3s ease; overflow: hidden;\n            }\n            .chatbot-container.open { opacity: 1; visibility: visible; transform: translateY(0) scale(1); }\n            .chatbot-header {\n                background: linear-gradient(135deg, var(--chatbot-header-bg) 0%, var(--chatbot-primary-dark) 100%); color: var(--chatbot-header-text);\n                padding: 16px; display: flex; justify-content: center; align-items: center; border-radius: 12px 12px 0 0; position: relative;\n            }\n            .chatbot-title { font-weight: 600; font-size: 16px; color: var(--chatbot-header-text); text-align: center; flex: 1; }\n            .chatbot-close {\n                background: none; border: none; color: var(--chatbot-header-text); cursor: pointer; padding: 8px; border-radius: 6px;\n                opacity: 0.8; transition: all 0.2s ease; position: absolute; right: 12px; top: 50%; transform: translateY(-50%);\n            }\n            .chatbot-close:hover { background: rgba(255,255,255,0.15); opacity: 1; transform: translateY(-50%) scale(1.1); }\n            .chatbot-messages {\n                flex: 1; padding: 16px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; background: var(--chatbot-background);\n            }\n            .chatbot-message { max-width: 80%; padding: 12px 16px; border-radius: 18px; font-size: 14px; line-height: 1.4; }\n            .chatbot-message.user { background: var(--chatbot-user-bg); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }\n            .chatbot-message.bot { background: var(--chatbot-bot-bg); color: var(--chatbot-text); align-self: flex-start; border-bottom-left-radius: 4px; }\n            .bot-message-content { line-height: 1.5; }\n            .bot-title {\n                font-size: 16px; font-weight: 600; color: var(--chatbot-text); margin: 8px 0 12px 0;\n                padding-bottom: 6px; border-bottom: 2px solid var(--chatbot-primary);\n            }\n            .bot-header { font-size: 14px; font-weight: 600; color: var(--chatbot-text); margin: 12px 0 8px 0; }\n            .bot-bullet { margin: 4px 0; padding-left: 8px; color: var(--chatbot-text); }\n            .bot-numbered { margin: 4px 0; padding-left: 8px; color: var(--chatbot-text); font-weight: 500; }\n            .bot-message-content strong { color: var(--chatbot-text); font-weight: 600; }\n            .bot-message-content br { line-height: 1.8; }\n            .chatbot-input-container {\n                padding: 16px; border-top: 1px solid var(--chatbot-border); display: flex; gap: 8px; background: var(--chatbot-background);\n            }\n            .chatbot-input {\n                flex: 1; padding: 12px 16px; border: 1px solid var(--chatbot-border); border-radius: 12px; outline: none; font-size: 14px;\n                background: var(--chatbot-background); color: var(--chatbot-text); resize: none; height: 20px; min-height: 20px; max-height: 20px;\n                line-height: 1.2; font-family: inherit; overflow-y: auto; overflow-x: hidden;\n            }\n            .chatbot-input:focus { border-color: var(--chatbot-primary); }\n            .chatbot-send {\n                width: 40px; height: 40px; border-radius: 50%; background: var(--chatbot-primary); border: none; cursor: pointer;\n                display: flex; align-items: center; justify-content: center; transition: background 0.2s;\n            }\n            .chatbot-send:hover { background: var(--chatbot-primary-dark); }\n            .chatbot-send:disabled { background: #adb5bd; cursor: not-allowed; }\n            .chatbot-send svg { width: 16px; height: 16px; fill: white; }\n            .chatbot-loading-inline {\n                display: flex; align-items: center; gap: 8px; color: var(--chatbot-text); font-size: 14px; opacity: 0.8;\n            }\n            .chatbot-loading-dots { display: flex; gap: 4px; }\n            .chatbot-loading-dot {\n                width: 6px; height: 6px; border-radius: 50%; background: var(--chatbot-primary); animation: chatbot-pulse 1.4s ease-in-out infinite both;\n            }\n            .chatbot-loading-dot:nth-child(1) { animation-delay: -0.32s; }\n            .chatbot-loading-dot:nth-child(2) { animation-delay: -0.16s; }\n            @keyframes chatbot-pulse { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }\n            .chatbot-status { padding: 8px 16px; background: #e3f2fd; color: #1976d2; font-size: 12px; text-align: center; }\n            .chatbot-site-subtitle { font-size: 12px; color: rgba(255, 255, 255, 0.8); margin-top: 2px; font-weight: 400; }\n            \n            /* Enhanced Markdown Styling */\n            .bot-message-content { line-height: 1.6; }\n            .bot-paragraph { margin: 8px 0; }\n            .bot-header { font-size: 18px; font-weight: 600; color: var(--chatbot-text); margin: 16px 0 8px 0; padding-bottom: 4px; border-bottom: 2px solid var(--chatbot-primary); }\n            .bot-subheader { font-size: 16px; font-weight: 600; color: var(--chatbot-text); margin: 12px 0 6px 0; }\n            .bot-bold { font-weight: 600; color: var(--chatbot-text); }\n            .bot-italic { font-style: italic; color: var(--chatbot-text); }\n            .bot-link { color: var(--chatbot-link); text-decoration: none; border-bottom: 1px solid transparent; transition: all 0.2s ease; }\n            .bot-link:hover { border-bottom-color: var(--chatbot-link); text-decoration: none; }\n            .bot-list, .bot-numbered-list { margin: 8px 0; padding-left: 20px; }\n            .bot-list-item { margin: 4px 0; color: var(--chatbot-text); line-height: 1.5; }\n            .bot-table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 14px; }\n            .bot-table-header { background: var(--chatbot-primary); color: white; padding: 8px 12px; text-align: left; font-weight: 600; }\n            .bot-table-cell { padding: 8px 12px; border: 1px solid var(--chatbot-border); color: var(--chatbot-text); }\n            .bot-table tbody tr:nth-child(even) { background: rgba(0, 0, 0, 0.02); }\n        `;\n\n        const existingStyles = document.getElementById('chatbot-styles');\n        if (existingStyles) {\n            existingStyles.remove();\n        }\n\n        const styleSheet = document.createElement('style');\n        styleSheet.id = 'chatbot-styles';\n        styleSheet.textContent = styles;\n        document.head.appendChild(styleSheet);\n\n        console.log('âœ… Styles applied successfully');\n    }\n\n    updateStyles() {\n        console.log('ðŸ”„ Updating styles with new theme...');\n        this.createStyles();\n    }\n\n    createChatWidget() {\n        const widget = document.createElement('div');\n        widget.className = `chatbot-widget ${this.options.position}`;\n        widget.innerHTML = `\n            <button class=\"chatbot-toggle\" id=\"chatbot-toggle\">\n                <svg viewBox=\"0 0 24 24\">\n                    <path d=\"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z\"/>\n                </svg>\n            </button>\n            <div class=\"chatbot-container\" id=\"chatbot-container\">\n                <div class=\"chatbot-header\">\n                    <div class=\"chatbot-title\">${this.options.title}</div>\n                    <button class=\"chatbot-close\" id=\"chatbot-close\">\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                            <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                        </svg>\n                    </button>\n                </div>\n                <div class=\"chatbot-messages\" id=\"chatbot-messages\">\n                    <div class=\"chatbot-message bot\">\n                        Hi! I'm your AI assistant. I'll help you with information from your scraped websites.\n                    </div>\n                </div>\n                <div class=\"chatbot-input-container\">\n                    <textarea class=\"chatbot-input\" id=\"chatbot-input\" placeholder=\"${this.options.placeholder}\" disabled rows=\"1\"></textarea>\n                    <button class=\"chatbot-send\" id=\"chatbot-send\" disabled>\n                        <svg viewBox=\"0 0 24 24\">\n                            <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        `;\n\n        document.body.appendChild(widget);\n        this.widget = widget;\n    }\n\n    bindEvents() {\n        const toggle = this.widget.querySelector('#chatbot-toggle');\n        const close = this.widget.querySelector('#chatbot-close');\n        const input = this.widget.querySelector('#chatbot-input');\n        const send = this.widget.querySelector('#chatbot-send');\n\n        toggle.addEventListener('click', () => this.toggleChat());\n        close.addEventListener('click', () => this.closeChat());\n        send.addEventListener('click', () => this.sendMessage());\n\n        input.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                this.sendMessage();\n            }\n        });\n    }\n\n    toggleChat() {\n        this.isOpen = !this.isOpen;\n        const container = this.widget.querySelector('#chatbot-container');\n        container.classList.toggle('open', this.isOpen);\n    }\n\n    closeChat() {\n        this.isOpen = false;\n        const container = this.widget.querySelector('#chatbot-container');\n        container.classList.remove('open');\n    }\n\n    enableInput() {\n        const input = this.widget.querySelector('#chatbot-input');\n        const send = this.widget.querySelector('#chatbot-send');\n        input.disabled = false;\n        send.disabled = false;\n        input.placeholder = this.options.placeholder || 'Ask me anything about this website...';\n        input.focus();\n    }\n\n    async sendMessage() {\n        const input = this.widget.querySelector('#chatbot-input');\n        const message = input.value.trim();\n        if (!message || !this.currentFileId) return;\n\n        this.addMessage(message, 'user');\n        input.value = '';\n        this.showLoading();\n\n        try {\n            const response = await fetch(`${this.baseUrl}/chat`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', 'x-api-key': this.apiKey },\n                body: JSON.stringify({ fileId: this.currentFileId, message: message })\n            });\n            const data = await response.json();\n            this.hideLoading();\n            if (data.success) {\n                this.addMessage(data.data.response, 'bot');\n            } else {\n                this.addMessage('Sorry, I encountered an error. Please try again.', 'bot');\n            }\n        } catch (error) {\n            console.error('Error sending message:', error);\n            this.hideLoading();\n            this.addMessage('Sorry, I encountered an error. Please try again.', 'bot');\n        }\n    }\n\n    addMessage(text, sender) {\n        const messages = this.widget.querySelector('#chatbot-messages');\n        const message = document.createElement('div');\n        message.className = `chatbot-message ${sender}`;\n\n        if (sender === 'bot') {\n            message.innerHTML = this.formatBotMessage(text);\n        } else {\n            message.textContent = text;\n        }\n\n        messages.appendChild(message);\n        messages.scrollTop = messages.scrollHeight;\n        this.chatHistory.push({ text, sender, timestamp: new Date() });\n    }\n\n    formatBotMessage(text) {\n        if (!text || typeof text !== 'string') return '';\n\n        // Clean up any malformed AI responses first\n        let formatted = this.cleanupAIResponse(text);\n        \n        // Process markdown links BEFORE escaping HTML\n        formatted = this.processMarkdownLinks(formatted);\n        \n        // Escape HTML to prevent any malformed content (but preserve our processed links)\n        formatted = this.escapeHtmlExceptLinks(formatted);\n\n        // Convert line breaks to HTML with proper spacing\n        formatted = formatted.replace(/\\n\\n/g, '</p><p class=\"bot-paragraph\">');\n        formatted = formatted.replace(/\\n/g, '<br>');\n        \n        // Process markdown headers (## Header)\n        formatted = this.processMarkdownHeaders(formatted);\n        \n        // Simple bold formatting for **text**\n        formatted = formatted.replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"bot-bold\">$1</strong>');\n        \n        // Simple italic formatting for *text*\n        formatted = formatted.replace(/\\*(.*?)\\*/g, '<em class=\"bot-italic\">$1</em>');\n        \n        // Process bullet points\n        formatted = this.processBulletPoints(formatted);\n        \n        // Process numbered lists\n        formatted = this.processNumberedLists(formatted);\n        \n        // Process markdown tables\n        formatted = this.processMarkdownTables(formatted);\n        \n        // Clean up any malformed paragraph tags and ensure proper wrapping\n        formatted = formatted.replace(/<\\/p><p class=\"bot-paragraph\">\\s*<\\/p>/g, '</p>');\n        formatted = formatted.replace(/^<\\/p>/, '');\n        formatted = formatted.replace(/<p class=\"bot-paragraph\">\\s*$/, '');\n        \n        // Wrap in paragraph tags if not already wrapped\n        if (!formatted.includes('<p class=\"bot-paragraph\">')) {\n            formatted = `<p class=\"bot-paragraph\">${formatted}</p>`;\n        }\n        \n        // Format as a clean response with proper spacing\n        return `<div class=\"bot-message-content\">${formatted}</div>`;\n    }\n\n    cleanupAIResponse(text) {\n        // Remove any malformed HTML tags that might cause issues\n        return text\n            .replace(/<[^>]*$/g, '') // Remove incomplete HTML tags at end\n            .replace(/^[^<]*>/g, '') // Remove incomplete HTML tags at start\n            .replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '') // Remove script tags\n            .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '') // Remove style tags\n            .trim();\n    }\n\n    processMarkdownLinks(text) {\n        // Convert markdown links [text](url) to clickable HTML links\n        return text.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"bot-link\">$1</a>');\n    }\n\n    escapeHtmlExceptLinks(text) {\n        // Split by HTML link tags to preserve them\n        const linkRegex = /(<a[^>]*>.*?<\\/a>)/g;\n        const parts = text.split(linkRegex);\n        \n        return parts.map(part => {\n            // If this part is a link, preserve it\n            if (linkRegex.test(part)) {\n                return part;\n            }\n            // Otherwise, escape HTML\n            return this.escapeHtml(part);\n        }).join('');\n    }\n\n    processMarkdownHeaders(text) {\n        // Process ## headers\n        text = text.replace(/##\\s+(.+?)(<br>|$)/g, '<h3 class=\"bot-header\">$1</h3><br>');\n        // Process ### headers\n        text = text.replace(/###\\s+(.+?)(<br>|$)/g, '<h4 class=\"bot-subheader\">$1</h4><br>');\n        return text;\n    }\n\n    processBulletPoints(text) {\n        // Convert bullet points to proper HTML lists\n        const lines = text.split('<br>');\n        let inList = false;\n        let result = [];\n        \n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n            \n            if (line.startsWith('â€¢ ') || line.startsWith('- ')) {\n                if (!inList) {\n                    result.push('</p><ul class=\"bot-list\"><p class=\"bot-paragraph\">');\n                    inList = true;\n                }\n                const content = line.startsWith('â€¢ ') ? line.substring(2) : line.substring(2);\n                result.push(`<li class=\"bot-list-item\">${content}</li>`);\n            } else {\n                if (inList) {\n                    result.push('</p></ul><p class=\"bot-paragraph\">');\n                    inList = false;\n                }\n                if (line) {\n                    result.push(line);\n                }\n            }\n        }\n        \n        if (inList) {\n            result.push('</p></ul><p class=\"bot-paragraph\">');\n        }\n        \n        return result.join('<br>');\n    }\n\n    processNumberedLists(text) {\n        // Convert numbered lists to proper HTML ordered lists\n        const lines = text.split('<br>');\n        let inList = false;\n        let result = [];\n        \n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n            \n            // Check for numbered list pattern (1. 2. etc.)\n            if (/^\\d+\\.\\s/.test(line)) {\n                if (!inList) {\n                    result.push('</p><ol class=\"bot-numbered-list\"><p class=\"bot-paragraph\">');\n                    inList = true;\n                }\n                const content = line.replace(/^\\d+\\.\\s/, '');\n                result.push(`<li class=\"bot-list-item\">${content}</li>`);\n            } else {\n                if (inList) {\n                    result.push('</p></ol><p class=\"bot-paragraph\">');\n                    inList = false;\n                }\n                if (line) {\n                    result.push(line);\n                }\n            }\n        }\n        \n        if (inList) {\n            result.push('</p></ol><p class=\"bot-paragraph\">');\n        }\n        \n        return result.join('<br>');\n    }\n\n    processMarkdownTables(text) {\n        // Convert markdown tables to HTML tables\n        const lines = text.split('<br>');\n        let result = [];\n        let inTable = false;\n        let tableRows = [];\n        \n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n            \n            // Check if this line is a table row (contains |)\n            if (line.includes('|') && line.split('|').length > 2) {\n                if (!inTable) {\n                    inTable = true;\n                    tableRows = [];\n                }\n                \n                // Skip separator rows (contains --- or ===)\n                if (line.includes('---') || line.includes('===')) {\n                    continue;\n                }\n                \n                // Process table row\n                const cells = line.split('|').map(cell => cell.trim()).filter(cell => cell);\n                tableRows.push(cells);\n            } else {\n                // If we were in a table, close it\n                if (inTable) {\n                    result.push(this.renderTable(tableRows));\n                    inTable = false;\n                    tableRows = [];\n                }\n                \n                // Add the non-table line\n                if (line) {\n                    result.push(line);\n                }\n            }\n        }\n        \n        // Close table if we ended while in one\n        if (inTable) {\n            result.push(this.renderTable(tableRows));\n        }\n        \n        return result.join('<br>');\n    }\n\n    renderTable(rows) {\n        if (rows.length === 0) return '';\n        \n        let html = '<table class=\"bot-table\">';\n        \n        // First row is header\n        if (rows.length > 0) {\n            html += '<thead><tr>';\n            rows[0].forEach(cell => {\n                html += `<th class=\"bot-table-header\">${cell}</th>`;\n            });\n            html += '</tr></thead>';\n        }\n        \n        // Remaining rows are body\n        if (rows.length > 1) {\n            html += '<tbody>';\n            for (let i = 1; i < rows.length; i++) {\n                html += '<tr>';\n                rows[i].forEach(cell => {\n                    html += `<td class=\"bot-table-cell\">${cell}</td>`;\n                });\n                html += '</tr>';\n            }\n            html += '</tbody>';\n        }\n        \n        html += '</table>';\n        return html;\n    }\n\n    escapeHtml(unsafe) {\n        return unsafe\n            .replace(/&/g, \"&amp;\")\n            .replace(/</g, \"&lt;\")\n            .replace(/>/g, \"&gt;\")\n            .replace(/\"/g, \"&quot;\")\n            .replace(/'/g, \"&#039;\");\n    }\n\n    showLoading() {\n        const messages = this.widget.querySelector('#chatbot-messages');\n        const loading = document.createElement('div');\n        loading.className = 'chatbot-message bot';\n        loading.id = 'chatbot-loading';\n        loading.innerHTML = `\n            <div class=\"bot-message-content\">\n                <div class=\"chatbot-loading-inline\">\n                    <span>AI is thinking</span>\n                    <div class=\"chatbot-loading-dots\">\n                        <div class=\"chatbot-loading-dot\"></div>\n                        <div class=\"chatbot-loading-dot\"></div>\n                        <div class=\"chatbot-loading-dot\"></div>\n                    </div>\n                </div>\n            </div>\n        `;\n        messages.appendChild(loading);\n        messages.scrollTop = messages.scrollHeight;\n    }\n\n    hideLoading() {\n        const loading = this.widget.querySelector('#chatbot-loading');\n        if (loading) loading.remove();\n    }\n\n    showNoSitesMessage() {\n        const messagesContainer = this.widget.querySelector('#chatbot-messages');\n        messagesContainer.innerHTML = `\n            <div class=\"chatbot-message bot\">\n                <div class=\"bot-message-content\">\n                    <div class=\"bot-title\">No websites available</div>\n                    <p>No scraped websites found for this API key. Please scrape some websites first using the dashboard.</p>\n                </div>\n            </div>\n        `;\n        const input = this.widget.querySelector('#chatbot-input');\n        const sendButton = this.widget.querySelector('#chatbot-send');\n        if (input) {\n            input.disabled = true;\n            input.placeholder = 'No websites available for chat';\n        }\n        if (sendButton) {\n            sendButton.disabled = true;\n        }\n    }\n\n    async selectSite(fileId, siteName, siteUrl) {\n        console.log('ðŸŽ¯ Selecting site:', siteName, 'with fileId:', fileId);\n        this.currentFileId = fileId;\n        this.enableInput();\n        this.clearChat();\n\n        console.log('ðŸ”„ Starting theme auto-detection...');\n        await this.autoDetectAndLoadTheme(fileId);\n        console.log('âœ… Theme auto-detection completed');\n    }\n\n    clearChat() {\n        const messages = this.widget.querySelector('#chatbot-messages');\n        const welcomeMessage = this.currentFileId ?\n            \"Hi! I'm ready to answer questions about the selected website. How can I help you?\" :\n            \"Hi! I'm your AI assistant. Please select a website from the dropdown above to start chatting about its content.\";\n\n        messages.innerHTML = `<div class=\"chatbot-message bot\">${welcomeMessage}</div>`;\n        this.chatHistory = [];\n    }\n\n    // Public API methods\n    open() {\n        this.isOpen = true;\n        const container = this.widget.querySelector('#chatbot-container');\n        container.classList.add('open');\n    }\n\n    close() {\n        this.closeChat();\n    }\n\n    destroy() {\n        if (this.configRefreshInterval) {\n            clearInterval(this.configRefreshInterval);\n        }\n        if (this.widget) {\n            this.widget.remove();\n        }\n    }\n\n    // Load complete SDK configuration from API\n    async loadSdkConfiguration() {\n        try {\n            console.log('ðŸ”§ Loading SDK configuration from API...');\n            const timestamp = new Date().getTime();\n            const response = await fetch(`${this.baseUrl}/sdk-config?t=${timestamp}`, {\n                method: 'GET',\n                headers: { 'Content-Type': 'application/json', 'x-api-key': this.apiKey }\n            });\n\n            const data = await response.json();\n            console.log('ðŸ“Š SDK Config Response:', data);\n\n            if (data.success && data.data) {\n                const config = data.data;\n                this.sdkConfig = config;\n\n                console.log('ðŸ”§ Applying configuration from API...');\n                if (config.integration.customizations) {\n                    const { position, title, placeholder } = config.integration.customizations;\n                    if (position) this.options.position = position;\n                    if (title) this.options.title = title;\n                    if (placeholder) this.options.placeholder = placeholder;\n                }\n\n                if (config.integration.themeChoice === 'website' && config.themeData) {\n                    this.options.themeStyle = 'website';\n                    this.websiteTheme = config.themeData;\n                } else {\n                    this.options.themeStyle = 'default';\n                }\n\n                if (config.selectedWebsite) {\n                    this.currentFileId = config.selectedWebsite.id;\n                    this.enableInput();\n                    this.clearChat();\n                } else if (config.availableWebsites.length > 0) {\n                    const firstSite = config.availableWebsites[0];\n                    this.currentFileId = firstSite.id;\n                    this.enableInput();\n                    this.clearChat();\n                } else {\n                    this.showNoSitesMessage();\n                }\n                this.createStyles();\n            } else {\n                console.error('âŒ Failed to load SDK configuration');\n                this.showNoSitesMessage();\n            }\n        } catch (error) {\n            console.error('âŒ Error loading SDK configuration:', error);\n            this.showNoSitesMessage();\n        }\n    }\n\n    // Theme management methods\n    getThemeColors() {\n        if (this.options.themeStyle === 'website' && this.websiteTheme && this.websiteTheme.colors) {\n            const colors = this.websiteTheme.colors;\n            const hasValidPrimary = colors.primary && this.isWebsiteSpecificColor(colors.primary);\n\n            if (!hasValidPrimary) {\n                return this.getDefaultThemeColors();\n            }\n\n            const themeColors = {\n                primary: colors.primary,\n                primaryDark: this.darkenColor(colors.primary, 20),\n                primaryLight: this.lightenColor(colors.primary, 20),\n                secondary: colors.secondary || this.adjustColorBrightness(colors.primary, -15),\n                background: colors.background || '#ffffff',\n                text: colors.text || this.getContrastingTextColor(colors.background || '#ffffff'),\n                border: colors.border || this.adjustColorBrightness(colors.background || '#ffffff', -8),\n                button: colors.button || colors.primary,\n                link: colors.link || colors.primary,\n                accent: colors.accent || colors.primary,\n                userBg: colors.primary,\n                botBg: this.generateBotBackgroundColor(colors),\n                headerBg: colors.primary,\n                headerText: this.getContrastingTextColor(colors.primary)\n            };\n            return this.ensureAccessibleColors(themeColors);\n        }\n        return this.getDefaultThemeColors();\n    }\n\n    getDefaultThemeColors() {\n        return {\n            primary: '#667eea', primaryDark: '#5a6fd8', primaryLight: '#7c8bf0',\n            secondary: '#6c757d', background: '#ffffff', text: '#333333',\n            border: '#dee2e6', button: '#667eea', link: '#667eea', accent: '#667eea',\n            userBg: '#667eea', botBg: '#f1f3f5', headerBg: '#667eea', headerText: '#ffffff'\n        };\n    }\n\n    isWebsiteSpecificColor(color) {\n        if (!color) return false;\n        const normalizedColor = color.toLowerCase().trim();\n        const genericColors = [\n            '#ffffff', '#fff', 'white', '#000000', '#000', 'black', '#333333', '#333',\n            '#666666', '#666', '#999999', '#999', '#cccccc', '#ccc', '#f0f0f0', '#f5f5f5', '#fafafa',\n            '#007bff', '#0056b3', '#0d6efd', '#dc3545', '#28a745', '#ffc107',\n            '#17a2b8', '#6c757d', '#343a40', '#667eea', '#764ba2'\n        ];\n        if (genericColors.includes(normalizedColor)) return false;\n        if (this.isColorTooLight(normalizedColor) || this.isColorTooDark(normalizedColor)) return false;\n        return this.hasGoodSaturation(normalizedColor);\n    }\n\n    isColorTooLight(color) {\n        const hex = color.replace('#', '');\n        if (hex.length !== 6) return false;\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n        return luminance > 0.9;\n    }\n\n    isColorTooDark(color) {\n        const hex = color.replace('#', '');\n        if (hex.length !== 6) return false;\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n        return luminance < 0.1;\n    }\n\n    hasGoodSaturation(color) {\n        const hex = color.replace('#', '');\n        if (hex.length !== 6) return false;\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        const saturation = max === 0 ? 0 : (max - min) / max;\n        return saturation > 0.15;\n    }\n\n    generateBotBackgroundColor(colors) {\n        if (colors.secondary && colors.secondary !== colors.primary) {\n            return this.lightenColor(colors.secondary, 60);\n        } else if (colors.primary) {\n            return this.lightenColor(colors.primary, 75);\n        }\n        return '#f1f3f5';\n    }\n\n    getContrastingTextColor(backgroundColor) {\n        return this.isLightColor(backgroundColor) ? '#ffffff' : '#2d3748';\n    }\n\n    ensureAccessibleColors(colors) {\n        if (this.isLightColor(colors.background) && this.isLightColor(colors.text)) {\n            colors.text = '#2d3748';\n        } else if (this.isDarkColor(colors.background) && this.isDarkColor(colors.text)) {\n            colors.text = '#f7fafc';\n        }\n        if (this.isLightColor(colors.botBg) && this.isLightColor(colors.text)) {\n            colors.botBg = '#f8f9fa';\n        } else if (this.isDarkColor(colors.botBg) && this.isDarkColor(colors.text)) {\n            colors.botBg = '#e2e8f0';\n        }\n        if (this.isColorTooSimilar(colors.primary, colors.background)) {\n            colors.primary = this.isLightColor(colors.background) ? '#4299e1' : '#63b3ed';\n        }\n        return colors;\n    }\n\n    isLightColor(color) {\n        if (!color || color === 'transparent') return true;\n        if (color.startsWith('#')) {\n            const hex = color.slice(1);\n            const r = parseInt(hex.substr(0, 2), 16);\n            const g = parseInt(hex.substr(2, 2), 16);\n            const b = parseInt(hex.substr(4, 2), 16);\n            const brightness = (r * 299 + g * 587 + b * 114) / 1000;\n            return brightness > 155;\n        }\n        return true;\n    }\n\n    isDarkColor(color) {\n        return !this.isLightColor(color);\n    }\n\n    isColorTooSimilar(color1, color2) {\n        if (!color1 || !color2 || !color1.startsWith('#') || !color2.startsWith('#')) return false;\n        const hex1 = color1.slice(1);\n        const hex2 = color2.slice(1);\n        const r1 = parseInt(hex1.substr(0, 2), 16), g1 = parseInt(hex1.substr(2, 2), 16), b1 = parseInt(hex1.substr(4, 2), 16);\n        const r2 = parseInt(hex2.substr(0, 2), 16), g2 = parseInt(hex2.substr(2, 2), 16), b2 = parseInt(hex2.substr(4, 2), 16);\n        const distance = Math.sqrt(Math.pow(r2 - r1, 2) + Math.pow(g2 - g1, 2) + Math.pow(b2 - b1, 2));\n        return distance < 100;\n    }\n\n    async autoDetectAndLoadTheme(fileId) {\n        try {\n            if (this.options.themeStyle === 'default') {\n                return false;\n            }\n            const themeLoaded = await this.loadWebsiteTheme(fileId);\n            if (themeLoaded) {\n                this.options.themeStyle = 'website';\n                return true;\n            } else {\n                this.options.themeStyle = 'default';\n                this.websiteTheme = null;\n                this.createStyles();\n                return false;\n            }\n        } catch (error) {\n            console.error('âŒ Error in auto-detect theme:', error);\n            this.options.themeStyle = 'default';\n            this.websiteTheme = null;\n            this.createStyles();\n            return false;\n        }\n    }\n\n    async loadWebsiteTheme(fileId) {\n        try {\n            const timestamp = new Date().getTime();\n            const response = await fetch(`${this.baseUrl}/theme/${fileId}?t=${timestamp}`, {\n                method: 'GET',\n                headers: { 'Content-Type': 'application/json', 'x-api-key': this.apiKey }\n            });\n            const data = await response.json();\n            if (data.success && data.data && data.data.colors) {\n                this.websiteTheme = data.data;\n                this.createStyles();\n                return true;\n            } else {\n                return false;\n            }\n        } catch (error) {\n            console.error('âŒ Error loading website theme:', error);\n            return false;\n        }\n    }\n\n    darkenColor(color, percent) {\n        if (!color || !color.startsWith('#')) return color;\n        const hex = color.slice(1);\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const factor = (100 - percent) / 100;\n        const newR = Math.round(r * factor);\n        const newG = Math.round(g * factor);\n        const newB = Math.round(b * factor);\n        return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;\n    }\n\n    lightenColor(color, percent) {\n        if (!color || !color.startsWith('#')) return color;\n        const hex = color.slice(1);\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const factor = percent / 100;\n        const newR = Math.round(r + (255 - r) * factor);\n        const newG = Math.round(g + (255 - g) * factor);\n        const newB = Math.round(b + (255 - b) * factor);\n        return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;\n    }\n\n    adjustColorBrightness(hex, percent) {\n        if (!hex || !hex.startsWith('#')) return hex;\n        hex = hex.replace('#', '');\n        const num = parseInt(hex, 16);\n        const amt = Math.round(2.55 * percent);\n        const R = (num >> 16) + amt;\n        const G = (num >> 8 & 0x00FF) + amt;\n        const B = (num & 0x0000FF) + amt;\n        return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);\n    }\n}\n\nexport default ChatBot;","import ChatBot from './ChatBot.js';\n\n// Auto-initialization function\nfunction initializeChatBot() {\n    // Find the script tag that loaded this SDK\n    const scripts = document.querySelectorAll('script[data-api-key]');\n    const currentScript = scripts[scripts.length - 1]; // Get the last script with data-api-key\n    \n    if (!currentScript) {\n        console.error('ChatBot SDK: No script tag found with data-api-key attribute');\n        return;\n    }\n    \n    const apiKey = currentScript.getAttribute('data-api-key');\n    \n    if (!apiKey) {\n        console.error('ChatBot SDK: API key is required. Add data-api-key=\"YOUR_API_KEY\" to the script tag.');\n        return;\n    }\n    \n    console.log('ðŸ”§ Initializing ChatBot SDK with API-only configuration...');\n    \n    // Only get baseUrl from data attributes - everything else comes from API\n    const config = {\n        baseUrl: currentScript.getAttribute('data-base-url') || undefined\n    };\n    \n    // Initialize the chatbot\n    try {\n        const chatbot = new ChatBot(apiKey, config);\n        \n        // Make chatbot globally accessible\n        window.ChatFlowAI = chatbot;\n        \n        // Dispatch ready event\n        const event = new CustomEvent('chatflow-ready', {\n            detail: { chatbot }\n        });\n        document.dispatchEvent(event);\n        \n        console.log('ChatFlow AI SDK initialized successfully - all settings loaded from API');\n    } catch (error) {\n        console.error('ChatBot SDK: Failed to initialize:', error);\n    }\n}\n\n// Initialize when DOM is ready\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initializeChatBot);\n} else {\n    // DOM is already ready\n    initializeChatBot();\n}\n\n// Export for manual initialization if needed\nexport { ChatBot, initializeChatBot };\nexport default ChatBot;\n\n// Log initialization method\nconsole.log('ðŸ“¦ ChatFlow AI SDK loaded - Configuration will be fetched from API');"],"names":["ChatBot","apiKey","_this","options","arguments","length","undefined","_classCallCheck","isLocalhost","window","location","hostname","includes","defaultBaseUrl","baseUrl","isOpen","currentFileId","chatHistory","selectedFileId","selectedSiteName","websiteTheme","_objectSpread","position","theme","themeStyle","title","placeholder","preselectedSite","init","setupConfigRefresh","ChatFlowRefresh","console","log","refreshConfiguration","_createClass","key","value","_this2","configRefreshInterval","setInterval","_asyncToGenerator","_regenerator","m","_callee","_t","w","_context","p","n","v","warn","a","document","addEventListener","hidden","_refreshConfiguration","_callee2","timestamp","response","data","newConfig","configChanged","_t2","_context2","Date","getTime","fetch","concat","method","headers","json","success","hasConfigurationChanged","applyNewConfiguration","showUpdateNotification","debug","apply","_this$sdkConfig$selec","_newConfig$selectedWe","_this$sdkConfig$integ","_newConfig$integratio","sdkConfig","oldWebsiteId","selectedWebsite","id","newWebsiteId","oldThemeChoice","integration","themeChoice","newThemeChoice","oldThemeData","JSON","stringify","themeData","newThemeData","_applyNewConfiguration","_callee3","customizations","titleElement","inputElement","firstSite","_context3","widget","className","querySelector","textContent","disabled","enableInput","clearChat","availableWebsites","showNoSitesMessage","createStyles","_x","_init","_callee4","isValidKey","_context4","createChatWidget","bindEvents","validateApiKey","loadSdkConfiguration","showApiKeyError","_validateApiKey","_callee5","_t3","_context5","replace","error","messages","innerHTML","input","send","selector","style","display","themeColors","getThemeColors","styles","primary","primaryDark","primaryLight","secondary","background","text","border","button","link","accent","userBg","botBg","headerBg","headerText","existingStyles","getElementById","remove","styleSheet","createElement","head","appendChild","updateStyles","body","_this3","toggle","close","toggleChat","closeChat","sendMessage","e","shiftKey","preventDefault","container","classList","focus","_sendMessage","_callee6","message","_t4","_context6","trim","addMessage","showLoading","fileId","hideLoading","sender","formatBotMessage","scrollTop","scrollHeight","push","formatted","cleanupAIResponse","processMarkdownLinks","escapeHtmlExceptLinks","processMarkdownHeaders","processBulletPoints","processNumberedLists","processMarkdownTables","_this4","linkRegex","parts","split","map","part","test","escapeHtml","join","lines","inList","result","i","line","startsWith","content","substring","inTable","tableRows","cells","cell","filter","renderTable","rows","html","forEach","unsafe","loading","messagesContainer","sendButton","_selectSite","_callee7","siteName","siteUrl","_context7","autoDetectAndLoadTheme","selectSite","_x2","_x3","_x4","welcomeMessage","open","add","destroy","clearInterval","_loadSdkConfiguration","_callee8","config","_config$integration$c","_t5","_context8","colors","hasValidPrimary","isWebsiteSpecificColor","getDefaultThemeColors","darkenColor","lightenColor","adjustColorBrightness","getContrastingTextColor","generateBotBackgroundColor","ensureAccessibleColors","color","normalizedColor","toLowerCase","genericColors","isColorTooLight","isColorTooDark","hasGoodSaturation","hex","r","parseInt","substr","g","b","luminance","max","Math","min","saturation","backgroundColor","isLightColor","isDarkColor","isColorTooSimilar","slice","brightness","color1","color2","hex1","hex2","r1","g1","b1","r2","g2","b2","distance","sqrt","pow","_autoDetectAndLoadTheme","_callee9","themeLoaded","_t6","_context9","loadWebsiteTheme","_x5","_loadWebsiteTheme","_callee0","_t7","_context0","_x6","percent","factor","newR","round","newG","newB","toString","padStart","num","amt","R","G","B","initializeChatBot","scripts","querySelectorAll","currentScript","getAttribute","chatbot","ChatFlowAI","event","CustomEvent","detail","dispatchEvent","readyState"],"mappings":"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"}