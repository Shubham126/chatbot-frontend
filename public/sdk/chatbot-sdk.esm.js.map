{"version":3,"file":"chatbot-sdk.esm.js","sources":["../src/ChatBot.js","../src/index.js"],"sourcesContent":["class ChatBot {\n    constructor(apiKey, options = {}) {\n        this.apiKey = apiKey;\n        // Auto-detect environment for baseUrl\n        const isLocalhost = window.location.hostname === 'localhost' ||\n            window.location.hostname === '127.0.0.1' ||\n            window.location.hostname.includes('127.0.0.1');\n\n        const defaultBaseUrl = isLocalhost ?\n            'http://localhost:3000/api/scrape' :\n            'https://chatbot-backend-srhg.onrender.com/api/scrape';\n\n        this.baseUrl = options.baseUrl || defaultBaseUrl;\n        this.isOpen = false;\n        this.currentFileId = null;\n        this.chatHistory = [];\n        this.selectedFileId = null;\n        this.selectedSiteName = null;\n        this.websiteTheme = null;\n\n        // Configuration options - will be loaded from API\n        this.options = {\n            position: 'bottom-right', // Default, will be overridden by API\n            theme: 'default',\n            themeStyle: 'auto', // Will be determined by API\n            title: 'ChatFlow AI Assistant',\n            placeholder: 'Ask me anything about this website...',\n            preselectedSite: null,\n            ...options\n        };\n\n        this.init();\n\n        // Set up periodic refresh to check for configuration changes\n        this.setupConfigRefresh();\n\n        // Add global method for manual refresh\n        window.ChatFlowRefresh = () => {\n            console.log('ðŸ”„ Manual refresh triggered');\n            this.refreshConfiguration();\n        };\n    }\n\n    setupConfigRefresh() {\n        // Check for configuration updates every 2 seconds for faster response\n        this.configRefreshInterval = setInterval(async () => {\n            try {\n                await this.refreshConfiguration();\n            } catch (error) {\n                console.warn('Config refresh failed:', error);\n            }\n        }, 2000);\n\n        // Also refresh when page becomes visible (user switches back to tab)\n        document.addEventListener('visibilitychange', () => {\n            if (!document.hidden) {\n                console.log('ðŸ”„ Page visible, checking for config updates...');\n                this.refreshConfiguration();\n            }\n        });\n\n        // Refresh when window gains focus\n        window.addEventListener('focus', () => {\n            console.log('ðŸ”„ Window focused, checking for config updates...');\n            this.refreshConfiguration();\n        });\n    }\n\n    async refreshConfiguration() {\n        try {\n            const timestamp = new Date().getTime();\n            const response = await fetch(`${this.baseUrl}/sdk-config?t=${timestamp}`, {\n                method: 'GET',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'x-api-key': this.apiKey\n                }\n            });\n\n            const data = await response.json();\n\n            if (data.success && data.data) {\n                const newConfig = data.data;\n\n                // Check if configuration has changed\n                const configChanged = this.hasConfigurationChanged(newConfig);\n\n                if (configChanged) {\n                    console.log('âš¡ Configuration changed, updating chatbot immediately...');\n                    await this.applyNewConfiguration(newConfig);\n\n                    // Show brief notification to user\n                    this.showUpdateNotification();\n                }\n            }\n        } catch (error) {\n            // Silently fail refresh attempts to avoid spam\n            console.debug('Config refresh error:', error);\n        }\n    }\n\n    hasConfigurationChanged(newConfig) {\n        if (!this.sdkConfig) return true;\n\n        // Check if selected website changed\n        const oldWebsiteId = this.sdkConfig.selectedWebsite?.id;\n        const newWebsiteId = newConfig.selectedWebsite?.id;\n\n        if (oldWebsiteId !== newWebsiteId) {\n            console.log('ðŸ“ Selected website changed:', oldWebsiteId, '->', newWebsiteId);\n            return true;\n        }\n\n        // Check if theme choice changed\n        const oldThemeChoice = this.sdkConfig.integration?.themeChoice;\n        const newThemeChoice = newConfig.integration?.themeChoice;\n\n        if (oldThemeChoice !== newThemeChoice) {\n            console.log('ðŸŽ¨ Theme choice changed:', oldThemeChoice, '->', newThemeChoice);\n            return true;\n        }\n\n        // Check if theme data changed (for website themes)\n        if (newThemeChoice === 'website') {\n            const oldThemeData = JSON.stringify(this.sdkConfig.themeData || {});\n            const newThemeData = JSON.stringify(newConfig.themeData || {});\n\n            if (oldThemeData !== newThemeData) {\n                console.log('ðŸŽ¨ Theme data changed');\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    async applyNewConfiguration(newConfig) {\n        // Store new configuration\n        this.sdkConfig = newConfig;\n\n        // Update all settings from new configuration\n        if (newConfig.integration.customizations) {\n            const customizations = newConfig.integration.customizations;\n\n            // Update position if changed\n            if (customizations.position && customizations.position !== this.options.position) {\n                this.options.position = customizations.position;\n                // Update widget position class\n                this.widget.className = `chatbot-widget ${this.options.position}`;\n                console.log('ðŸ“ Position updated to:', this.options.position);\n            }\n\n            // Update title if changed\n            if (customizations.title && customizations.title !== this.options.title) {\n                this.options.title = customizations.title;\n                const titleElement = this.widget.querySelector('.chatbot-title');\n                if (titleElement) {\n                    titleElement.textContent = customizations.title;\n                }\n                console.log('ðŸ“ Title updated to:', this.options.title);\n            }\n\n            // Update placeholder if changed\n            if (customizations.placeholder && customizations.placeholder !== this.options.placeholder) {\n                this.options.placeholder = customizations.placeholder;\n                const inputElement = this.widget.querySelector('#chatbot-input');\n                if (inputElement && !inputElement.disabled) {\n                    inputElement.placeholder = customizations.placeholder;\n                }\n                console.log('ðŸ’¬ Placeholder updated to:', this.options.placeholder);\n            }\n        }\n\n        // Update theme settings\n        if (newConfig.integration.themeChoice === 'website' && newConfig.themeData) {\n            this.options.themeStyle = 'website';\n            this.websiteTheme = newConfig.themeData;\n        } else {\n            this.options.themeStyle = 'default';\n            this.websiteTheme = null;\n        }\n\n        // Update selected website\n        if (newConfig.selectedWebsite) {\n            this.currentFileId = newConfig.selectedWebsite.id;\n            this.enableInput();\n            this.clearChat();\n            // NOTE: I am removing calls to updateChatHeader as per previous request\n        } else if (newConfig.availableWebsites.length > 0) {\n            const firstSite = newConfig.availableWebsites[0];\n            this.currentFileId = firstSite.id;\n            this.enableInput();\n            this.clearChat();\n            // NOTE: I am removing calls to updateChatHeader as per previous request\n        } else {\n            this.showNoSitesMessage();\n        }\n\n        // Re-apply styles with new theme\n        this.createStyles();\n\n        console.log('âœ… Configuration updated successfully');\n    }\n\n    showUpdateNotification() {\n        // Notification removed - silent updates\n    }\n\n    async init() {\n        this.createStyles();\n        this.createChatWidget();\n        this.bindEvents();\n\n        // Validate API key and load SDK configuration\n        const isValidKey = await this.validateApiKey();\n        if (isValidKey) {\n            // Load complete SDK configuration from API\n            await this.loadSdkConfiguration();\n        } else {\n            this.showApiKeyError();\n        }\n    }\n\n    async validateApiKey() {\n        try {\n            const response = await fetch(`${this.baseUrl.replace('/scrape', '')}/auth/validate-api-key`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'x-api-key': this.apiKey\n                }\n            });\n\n            const data = await response.json();\n            return data.success;\n        } catch (error) {\n            console.error('Error validating API key:', error);\n            return false;\n        }\n    }\n\n    showApiKeyError() {\n        const messages = this.widget.querySelector('#chatbot-messages');\n        messages.innerHTML = `\n            <div class=\"chatbot-message bot\" style=\"background: #fef2f2; color: #dc2626; border: 1px solid #fecaca;\">\n                <strong>Invalid API Key</strong><br>\n                The provided API key is invalid or has been revoked. Please check your integration settings and ensure you're using a valid API key.\n            </div>\n        `;\n\n        // Disable input\n        const input = this.widget.querySelector('#chatbot-input');\n        const send = this.widget.querySelector('#chatbot-send');\n        input.disabled = true;\n        send.disabled = true;\n        input.placeholder = 'Invalid API key - chatbot disabled';\n\n        // Hide site selector if it exists\n        const selector = this.widget.querySelector('#chatbot-site-selector');\n        if (selector) {\n            selector.style.display = 'none';\n        }\n    }\n\n    createStyles() {\n        // Create CSS custom properties for theming\n        const themeColors = this.getThemeColors();\n        console.log('ðŸŽ¨ Creating styles with theme colors:', themeColors);\n\n        const styles = `\n            :root {\n                --chatbot-primary: ${themeColors.primary};\n                --chatbot-primary-dark: ${themeColors.primaryDark};\n                --chatbot-primary-light: ${themeColors.primaryLight || themeColors.primary};\n                --chatbot-secondary: ${themeColors.secondary};\n                --chatbot-background: ${themeColors.background};\n                --chatbot-text: ${themeColors.text};\n                --chatbot-border: ${themeColors.border};\n                --chatbot-button: ${themeColors.button || themeColors.primary};\n                --chatbot-link: ${themeColors.link || themeColors.primary};\n                --chatbot-accent: ${themeColors.accent || themeColors.primary};\n                --chatbot-user-bg: ${themeColors.userBg};\n                --chatbot-bot-bg: ${themeColors.botBg};\n                --chatbot-header-bg: ${themeColors.headerBg || themeColors.primary};\n                --chatbot-header-text: ${themeColors.headerText || '#ffffff'};\n            }\n            .chatbot-widget {\n                position: fixed; z-index: 10000; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            }\n            .chatbot-widget.bottom-right { bottom: 20px; right: 20px; }\n            .chatbot-widget.bottom-left { bottom: 20px; left: 20px; }\n            .chatbot-widget.top-right { top: 20px; right: 20px; }\n            .chatbot-widget.top-left { top: 20px; left: 20px; }\n            .chatbot-toggle {\n                width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--chatbot-primary) 0%, var(--chatbot-primary-dark) 100%);\n                border: none; cursor: pointer; box-shadow: 0 4px 20px rgba(0,0,0,0.15); display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;\n            }\n            .chatbot-toggle svg { width: 24px; height: 24px; fill: white; }\n            .chatbot-widget .chatbot-container.open ~ .chatbot-toggle {\n                opacity: 0; visibility: hidden; transform: scale(0.8); pointer-events: none;\n            }\n            .chatbot-container {\n                position: absolute; bottom: 0; right: 0; width: 380px; height: 605px; background: var(--chatbot-background);\n                border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.15); display: flex; flex-direction: column;\n                opacity: 0; visibility: hidden; transform: translateY(20px) scale(0.95); transition: all 0.3s ease; overflow: hidden;\n            }\n            .chatbot-container.open { opacity: 1; visibility: visible; transform: translateY(0) scale(1); }\n            .chatbot-header {\n                background: linear-gradient(135deg, var(--chatbot-header-bg) 0%, var(--chatbot-primary-dark) 100%); color: var(--chatbot-header-text);\n                padding: 16px; display: flex; justify-content: center; align-items: center; border-radius: 12px 12px 0 0; position: relative;\n            }\n            .chatbot-title { font-weight: 600; font-size: 16px; color: var(--chatbot-header-text); text-align: center; flex: 1; }\n            .chatbot-close {\n                background: none; border: none; color: var(--chatbot-header-text); cursor: pointer; padding: 8px; border-radius: 6px;\n                opacity: 0.8; transition: all 0.2s ease; position: absolute; right: 12px; top: 50%; transform: translateY(-50%);\n            }\n            .chatbot-close:hover { background: rgba(255,255,255,0.15); opacity: 1; transform: translateY(-50%) scale(1.1); }\n            .chatbot-messages {\n                flex: 1; padding: 16px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; background: var(--chatbot-background);\n            }\n            .chatbot-message { max-width: 80%; padding: 12px 16px; border-radius: 18px; font-size: 14px; line-height: 1.4; }\n            .chatbot-message.user { background: var(--chatbot-user-bg); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }\n            .chatbot-message.bot { background: var(--chatbot-bot-bg); color: var(--chatbot-text); align-self: flex-start; border-bottom-left-radius: 4px; }\n            .bot-message-content { line-height: 1.5; }\n            .bot-title {\n                font-size: 16px; font-weight: 600; color: var(--chatbot-text); margin: 8px 0 12px 0;\n                padding-bottom: 6px; border-bottom: 2px solid var(--chatbot-primary);\n            }\n            .bot-header { font-size: 14px; font-weight: 600; color: var(--chatbot-text); margin: 12px 0 8px 0; }\n            .bot-bullet { margin: 4px 0; padding-left: 8px; color: var(--chatbot-text); }\n            .bot-numbered { margin: 4px 0; padding-left: 8px; color: var(--chatbot-text); font-weight: 500; }\n            .bot-message-content strong { color: var(--chatbot-text); font-weight: 600; }\n            .bot-message-content br { line-height: 1.8; }\n            .chatbot-input-container {\n                padding: 16px; border-top: 1px solid var(--chatbot-border); display: flex; gap: 8px; background: var(--chatbot-background);\n            }\n            .chatbot-input {\n                flex: 1; padding: 12px 16px; border: 1px solid var(--chatbot-border); border-radius: 12px; outline: none; font-size: 14px;\n                background: var(--chatbot-background); color: var(--chatbot-text); resize: none; height: 20px; min-height: 20px; max-height: 20px;\n                line-height: 1.2; font-family: inherit; overflow-y: auto; overflow-x: hidden;\n            }\n            .chatbot-input:focus { border-color: var(--chatbot-primary); }\n            .chatbot-send {\n                width: 40px; height: 40px; border-radius: 50%; background: var(--chatbot-primary); border: none; cursor: pointer;\n                display: flex; align-items: center; justify-content: center; transition: background 0.2s;\n            }\n            .chatbot-send:hover { background: var(--chatbot-primary-dark); }\n            .chatbot-send:disabled { background: #adb5bd; cursor: not-allowed; }\n            .chatbot-send svg { width: 16px; height: 16px; fill: white; }\n            .chatbot-loading-inline {\n                display: flex; align-items: center; gap: 8px; color: var(--chatbot-text); font-size: 14px; opacity: 0.8;\n            }\n            .chatbot-loading-dots { display: flex; gap: 4px; }\n            .chatbot-loading-dot {\n                width: 6px; height: 6px; border-radius: 50%; background: var(--chatbot-primary); animation: chatbot-pulse 1.4s ease-in-out infinite both;\n            }\n            .chatbot-loading-dot:nth-child(1) { animation-delay: -0.32s; }\n            .chatbot-loading-dot:nth-child(2) { animation-delay: -0.16s; }\n            @keyframes chatbot-pulse { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }\n            .chatbot-status { padding: 8px 16px; background: #e3f2fd; color: #1976d2; font-size: 12px; text-align: center; }\n            .chatbot-site-subtitle { font-size: 12px; color: rgba(255, 255, 255, 0.8); margin-top: 2px; font-weight: 400; }\n            \n            /* Enhanced Markdown Styling */\n            .bot-message-content { line-height: 1.6; }\n            .bot-paragraph { margin: 8px 0; }\n            .bot-header { font-size: 18px; font-weight: 600; color: var(--chatbot-text); margin: 16px 0 8px 0; padding-bottom: 4px; border-bottom: 2px solid var(--chatbot-primary); }\n            .bot-subheader { font-size: 16px; font-weight: 600; color: var(--chatbot-text); margin: 12px 0 6px 0; }\n            .bot-bold { font-weight: 600; color: var(--chatbot-text); }\n            .bot-italic { font-style: italic; color: var(--chatbot-text); }\n            .bot-link { color: var(--chatbot-link); text-decoration: none; border-bottom: 1px solid transparent; transition: all 0.2s ease; }\n            .bot-link:hover { border-bottom-color: var(--chatbot-link); text-decoration: none; }\n            .bot-list, .bot-numbered-list { margin: 8px 0; padding-left: 20px; }\n            .bot-list-item { margin: 4px 0; color: var(--chatbot-text); line-height: 1.5; }\n            .bot-table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 14px; }\n            .bot-table-header { background: var(--chatbot-primary); color: white; padding: 8px 12px; text-align: left; font-weight: 600; }\n            .bot-table-cell { padding: 8px 12px; border: 1px solid var(--chatbot-border); color: var(--chatbot-text); }\n            .bot-table tbody tr:nth-child(even) { background: rgba(0, 0, 0, 0.02); }\n        `;\n\n        const existingStyles = document.getElementById('chatbot-styles');\n        if (existingStyles) {\n            existingStyles.remove();\n        }\n\n        const styleSheet = document.createElement('style');\n        styleSheet.id = 'chatbot-styles';\n        styleSheet.textContent = styles;\n        document.head.appendChild(styleSheet);\n\n        console.log('âœ… Styles applied successfully');\n    }\n\n    updateStyles() {\n        console.log('ðŸ”„ Updating styles with new theme...');\n        this.createStyles();\n    }\n\n    createChatWidget() {\n        const widget = document.createElement('div');\n        widget.className = `chatbot-widget ${this.options.position}`;\n        widget.innerHTML = `\n            <button class=\"chatbot-toggle\" id=\"chatbot-toggle\">\n                <svg viewBox=\"0 0 24 24\">\n                    <path d=\"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z\"/>\n                </svg>\n            </button>\n            <div class=\"chatbot-container\" id=\"chatbot-container\">\n                <div class=\"chatbot-header\">\n                    <div class=\"chatbot-title\">${this.options.title}</div>\n                    <button class=\"chatbot-close\" id=\"chatbot-close\">\n                        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                            <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n                        </svg>\n                    </button>\n                </div>\n                <div class=\"chatbot-messages\" id=\"chatbot-messages\">\n                    <div class=\"chatbot-message bot\">\n                        Hi! I'm your AI assistant. I'll help you with information from your scraped websites.\n                    </div>\n                </div>\n                <div class=\"chatbot-input-container\">\n                    <textarea class=\"chatbot-input\" id=\"chatbot-input\" placeholder=\"${this.options.placeholder}\" disabled rows=\"1\"></textarea>\n                    <button class=\"chatbot-send\" id=\"chatbot-send\" disabled>\n                        <svg viewBox=\"0 0 24 24\">\n                            <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"/>\n                        </svg>\n                    </button>\n                </div>\n            </div>\n        `;\n\n        document.body.appendChild(widget);\n        this.widget = widget;\n    }\n\n    bindEvents() {\n        const toggle = this.widget.querySelector('#chatbot-toggle');\n        const close = this.widget.querySelector('#chatbot-close');\n        const input = this.widget.querySelector('#chatbot-input');\n        const send = this.widget.querySelector('#chatbot-send');\n\n        toggle.addEventListener('click', () => this.toggleChat());\n        close.addEventListener('click', () => this.closeChat());\n        send.addEventListener('click', () => this.sendMessage());\n\n        input.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                this.sendMessage();\n            }\n        });\n    }\n\n    toggleChat() {\n        this.isOpen = !this.isOpen;\n        const container = this.widget.querySelector('#chatbot-container');\n        container.classList.toggle('open', this.isOpen);\n    }\n\n    closeChat() {\n        this.isOpen = false;\n        const container = this.widget.querySelector('#chatbot-container');\n        container.classList.remove('open');\n    }\n\n    enableInput() {\n        const input = this.widget.querySelector('#chatbot-input');\n        const send = this.widget.querySelector('#chatbot-send');\n        input.disabled = false;\n        send.disabled = false;\n        input.placeholder = this.options.placeholder || 'Ask me anything about this website...';\n        input.focus();\n    }\n\n    async sendMessage() {\n        const input = this.widget.querySelector('#chatbot-input');\n        const message = input.value.trim();\n        if (!message || !this.currentFileId) return;\n\n        this.addMessage(message, 'user');\n        input.value = '';\n        this.showLoading();\n\n        try {\n            const response = await fetch(`${this.baseUrl}/chat`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json', 'x-api-key': this.apiKey },\n                body: JSON.stringify({ fileId: this.currentFileId, message: message })\n            });\n            const data = await response.json();\n            this.hideLoading();\n            if (data.success) {\n                this.addMessage(data.data.response, 'bot');\n            } else {\n                this.addMessage('Sorry, I encountered an error. Please try again.', 'bot');\n            }\n        } catch (error) {\n            console.error('Error sending message:', error);\n            this.hideLoading();\n            this.addMessage('Sorry, I encountered an error. Please try again.', 'bot');\n        }\n    }\n\n    addMessage(text, sender) {\n        const messages = this.widget.querySelector('#chatbot-messages');\n        const message = document.createElement('div');\n        message.className = `chatbot-message ${sender}`;\n\n        if (sender === 'bot') {\n            message.innerHTML = this.formatBotMessage(text);\n        } else {\n            message.textContent = text;\n        }\n\n        messages.appendChild(message);\n        messages.scrollTop = messages.scrollHeight;\n        this.chatHistory.push({ text, sender, timestamp: new Date() });\n    }\n\n    formatBotMessage(text) {\n        if (!text || typeof text !== 'string') return '';\n\n        // Clean up any malformed AI responses first\n        let formatted = this.cleanupAIResponse(text);\n\n        // Process markdown links BEFORE escaping HTML\n        formatted = this.processMarkdownLinks(formatted);\n\n        // Escape HTML to prevent any malformed content (but preserve our processed links)\n        formatted = this.escapeHtmlExceptLinks(formatted);\n\n        // Convert line breaks to HTML with proper spacing\n        formatted = formatted.replace(/\\n\\n/g, '</p><p class=\"bot-paragraph\">');\n        formatted = formatted.replace(/\\n/g, '<br>');\n\n        // Process markdown headers (## Header)\n        formatted = this.processMarkdownHeaders(formatted);\n\n        // Simple bold formatting for **text**\n        formatted = formatted.replace(/\\*\\*(.*?)\\*\\*/g, '<strong class=\"bot-bold\">$1</strong>');\n\n        // Simple italic formatting for *text*\n        formatted = formatted.replace(/\\*(.*?)\\*/g, '<em class=\"bot-italic\">$1</em>');\n\n        // Process bullet points\n        formatted = this.processBulletPoints(formatted);\n\n        // Process numbered lists\n        formatted = this.processNumberedLists(formatted);\n\n        // Process markdown tables\n        formatted = this.processMarkdownTables(formatted);\n\n        // Clean up any malformed paragraph tags and ensure proper wrapping\n        formatted = formatted.replace(/<\\/p><p class=\"bot-paragraph\">\\s*<\\/p>/g, '</p>');\n        formatted = formatted.replace(/^<\\/p>/, '');\n        formatted = formatted.replace(/<p class=\"bot-paragraph\">\\s*$/, '');\n\n        // Wrap in paragraph tags if not already wrapped\n        if (!formatted.includes('<p class=\"bot-paragraph\">')) {\n            formatted = `<p class=\"bot-paragraph\">${formatted}</p>`;\n        }\n\n        // Format as a clean response with proper spacing\n        return `<div class=\"bot-message-content\">${formatted}</div>`;\n    }\n\n    cleanupAIResponse(text) {\n        // Remove any malformed HTML tags that might cause issues\n        return text\n            .replace(/<[^>]*$/g, '') // Remove incomplete HTML tags at end\n            .replace(/^[^<]*>/g, '') // Remove incomplete HTML tags at start\n            .replace(/<script[^>]*>[\\s\\S]*?<\\/script>/gi, '') // Remove script tags\n            .replace(/<style[^>]*>[\\s\\S]*?<\\/style>/gi, '') // Remove style tags\n            .trim();\n    }\n\n    processMarkdownLinks(text) {\n        // Convert markdown links [text](url) to clickable HTML links\n        return text.replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"bot-link\">$1</a>');\n    }\n\n    escapeHtmlExceptLinks(text) {\n        // Split by HTML link tags to preserve them\n        const linkRegex = /(<a[^>]*>.*?<\\/a>)/g;\n        const parts = text.split(linkRegex);\n\n        return parts.map(part => {\n            // If this part is a link, preserve it\n            if (linkRegex.test(part)) {\n                return part;\n            }\n            // Otherwise, escape HTML\n            return this.escapeHtml(part);\n        }).join('');\n    }\n\n    processMarkdownHeaders(text) {\n        // Process ## headers\n        text = text.replace(/##\\s+(.+?)(<br>|$)/g, '<h3 class=\"bot-header\">$1</h3><br>');\n        // Process ### headers\n        text = text.replace(/###\\s+(.+?)(<br>|$)/g, '<h4 class=\"bot-subheader\">$1</h4><br>');\n        return text;\n    }\n\n    processBulletPoints(text) {\n        // Convert bullet points to proper HTML lists\n        const lines = text.split('<br>');\n        let inList = false;\n        let result = [];\n\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n\n            if (line.startsWith('â€¢ ') || line.startsWith('- ')) {\n                if (!inList) {\n                    result.push('</p><ul class=\"bot-list\"><p class=\"bot-paragraph\">');\n                    inList = true;\n                }\n                const content = line.startsWith('â€¢ ') ? line.substring(2) : line.substring(2);\n                result.push(`<li class=\"bot-list-item\">${content}</li>`);\n            } else {\n                if (inList) {\n                    result.push('</p></ul><p class=\"bot-paragraph\">');\n                    inList = false;\n                }\n                if (line) {\n                    result.push(line);\n                }\n            }\n        }\n\n        if (inList) {\n            result.push('</p></ul><p class=\"bot-paragraph\">');\n        }\n\n        return result.join('<br>');\n    }\n\n    processNumberedLists(text) {\n        // Convert numbered lists to proper HTML ordered lists\n        const lines = text.split('<br>');\n        let inList = false;\n        let result = [];\n\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n\n            // Check for numbered list pattern (1. 2. etc.)\n            if (/^\\d+\\.\\s/.test(line)) {\n                if (!inList) {\n                    result.push('</p><ol class=\"bot-numbered-list\"><p class=\"bot-paragraph\">');\n                    inList = true;\n                }\n                const content = line.replace(/^\\d+\\.\\s/, '');\n                result.push(`<li class=\"bot-list-item\">${content}</li>`);\n            } else {\n                if (inList) {\n                    result.push('</p></ol><p class=\"bot-paragraph\">');\n                    inList = false;\n                }\n                if (line) {\n                    result.push(line);\n                }\n            }\n        }\n\n        if (inList) {\n            result.push('</p></ol><p class=\"bot-paragraph\">');\n        }\n\n        return result.join('<br>');\n    }\n\n    processMarkdownTables(text) {\n        // Convert markdown tables to HTML tables\n        const lines = text.split('<br>');\n        let result = [];\n        let inTable = false;\n        let tableRows = [];\n\n        for (let i = 0; i < lines.length; i++) {\n            const line = lines[i].trim();\n\n            // Check if this line is a table row (contains |)\n            if (line.includes('|') && line.split('|').length > 2) {\n                if (!inTable) {\n                    inTable = true;\n                    tableRows = [];\n                }\n\n                // Skip separator rows (contains --- or ===)\n                if (line.includes('---') || line.includes('===')) {\n                    continue;\n                }\n\n                // Process table row\n                const cells = line.split('|').map(cell => cell.trim()).filter(cell => cell);\n                tableRows.push(cells);\n            } else {\n                // If we were in a table, close it\n                if (inTable) {\n                    result.push(this.renderTable(tableRows));\n                    inTable = false;\n                    tableRows = [];\n                }\n\n                // Add the non-table line\n                if (line) {\n                    result.push(line);\n                }\n            }\n        }\n\n        // Close table if we ended while in one\n        if (inTable) {\n            result.push(this.renderTable(tableRows));\n        }\n\n        return result.join('<br>');\n    }\n\n    renderTable(rows) {\n        if (rows.length === 0) return '';\n\n        let html = '<table class=\"bot-table\">';\n\n        // First row is header\n        if (rows.length > 0) {\n            html += '<thead><tr>';\n            rows[0].forEach(cell => {\n                html += `<th class=\"bot-table-header\">${cell}</th>`;\n            });\n            html += '</tr></thead>';\n        }\n\n        // Remaining rows are body\n        if (rows.length > 1) {\n            html += '<tbody>';\n            for (let i = 1; i < rows.length; i++) {\n                html += '<tr>';\n                rows[i].forEach(cell => {\n                    html += `<td class=\"bot-table-cell\">${cell}</td>`;\n                });\n                html += '</tr>';\n            }\n            html += '</tbody>';\n        }\n\n        html += '</table>';\n        return html;\n    }\n\n    escapeHtml(unsafe) {\n        return unsafe\n            .replace(/&/g, \"&amp;\")\n            .replace(/</g, \"&lt;\")\n            .replace(/>/g, \"&gt;\")\n            .replace(/\"/g, \"&quot;\")\n            .replace(/'/g, \"&#039;\");\n    }\n\n    showLoading() {\n        const messages = this.widget.querySelector('#chatbot-messages');\n        const loading = document.createElement('div');\n        loading.className = 'chatbot-message bot';\n        loading.id = 'chatbot-loading';\n        loading.innerHTML = `\n            <div class=\"bot-message-content\">\n                <div class=\"chatbot-loading-inline\">\n                    <span>AI is thinking</span>\n                    <div class=\"chatbot-loading-dots\">\n                        <div class=\"chatbot-loading-dot\"></div>\n                        <div class=\"chatbot-loading-dot\"></div>\n                        <div class=\"chatbot-loading-dot\"></div>\n                    </div>\n                </div>\n            </div>\n        `;\n        messages.appendChild(loading);\n        messages.scrollTop = messages.scrollHeight;\n    }\n\n    hideLoading() {\n        const loading = this.widget.querySelector('#chatbot-loading');\n        if (loading) loading.remove();\n    }\n\n    showNoSitesMessage() {\n        const messagesContainer = this.widget.querySelector('#chatbot-messages');\n        messagesContainer.innerHTML = `\n            <div class=\"chatbot-message bot\">\n                <div class=\"bot-message-content\">\n                    <div class=\"bot-title\">No websites available</div>\n                    <p>No scraped websites found for this API key. Please scrape some websites first using the dashboard.</p>\n                </div>\n            </div>\n        `;\n        const input = this.widget.querySelector('#chatbot-input');\n        const sendButton = this.widget.querySelector('#chatbot-send');\n        if (input) {\n            input.disabled = true;\n            input.placeholder = 'No websites available for chat';\n        }\n        if (sendButton) {\n            sendButton.disabled = true;\n        }\n    }\n\n    async selectSite(fileId, siteName, siteUrl) {\n        console.log('ðŸŽ¯ Selecting site:', siteName, 'with fileId:', fileId);\n        this.currentFileId = fileId;\n        this.enableInput();\n        this.clearChat();\n\n        console.log('ðŸ”„ Starting theme auto-detection...');\n        await this.autoDetectAndLoadTheme(fileId);\n        console.log('âœ… Theme auto-detection completed');\n    }\n\n    clearChat() {\n        const messages = this.widget.querySelector('#chatbot-messages');\n        const welcomeMessage = this.currentFileId ?\n            \"Hi! I'm ready to answer questions about the selected website. How can I help you?\" :\n            \"Hi! I'm your AI assistant. Please select a website from the dropdown above to start chatting about its content.\";\n\n        messages.innerHTML = `<div class=\"chatbot-message bot\">${welcomeMessage}</div>`;\n        this.chatHistory = [];\n    }\n\n    // Public API methods\n    open() {\n        this.isOpen = true;\n        const container = this.widget.querySelector('#chatbot-container');\n        container.classList.add('open');\n    }\n\n    close() {\n        this.closeChat();\n    }\n\n    destroy() {\n        if (this.configRefreshInterval) {\n            clearInterval(this.configRefreshInterval);\n        }\n        if (this.widget) {\n            this.widget.remove();\n        }\n    }\n\n    // Load complete SDK configuration from API\n    async loadSdkConfiguration() {\n        try {\n            console.log('ðŸ”§ Loading SDK configuration from API...');\n            const timestamp = new Date().getTime();\n            const response = await fetch(`${this.baseUrl}/sdk-config?t=${timestamp}`, {\n                method: 'GET',\n                headers: { 'Content-Type': 'application/json', 'x-api-key': this.apiKey }\n            });\n\n            const data = await response.json();\n            console.log('ðŸ“Š SDK Config Response:', data);\n\n            if (data.success && data.data) {\n                const config = data.data;\n                this.sdkConfig = config;\n\n                console.log('ðŸ”§ Applying configuration from API...');\n                if (config.integration.customizations) {\n                    const { position, title, placeholder } = config.integration.customizations;\n                    if (position) this.options.position = position;\n                    if (title) this.options.title = title;\n                    if (placeholder) this.options.placeholder = placeholder;\n                }\n\n                if (config.integration.themeChoice === 'website' && config.themeData) {\n                    this.options.themeStyle = 'website';\n                    this.websiteTheme = config.themeData;\n                } else {\n                    this.options.themeStyle = 'default';\n                }\n\n                if (config.selectedWebsite) {\n                    this.currentFileId = config.selectedWebsite.id;\n                    this.enableInput();\n                    this.clearChat();\n                } else if (config.availableWebsites.length > 0) {\n                    const firstSite = config.availableWebsites[0];\n                    this.currentFileId = firstSite.id;\n                    this.enableInput();\n                    this.clearChat();\n                } else {\n                    this.showNoSitesMessage();\n                }\n                this.createStyles();\n            } else {\n                console.error('âŒ Failed to load SDK configuration');\n                this.showNoSitesMessage();\n            }\n        } catch (error) {\n            console.error('âŒ Error loading SDK configuration:', error);\n            this.showNoSitesMessage();\n        }\n    }\n\n    // Theme management methods\n    getThemeColors() {\n        if (this.options.themeStyle === 'website' && this.websiteTheme && this.websiteTheme.colors) {\n            const colors = this.websiteTheme.colors;\n            const hasValidPrimary = colors.primary && this.isWebsiteSpecificColor(colors.primary);\n\n            if (!hasValidPrimary) {\n                return this.getDefaultThemeColors();\n            }\n\n            const themeColors = {\n                primary: colors.primary,\n                primaryDark: this.darkenColor(colors.primary, 20),\n                primaryLight: this.lightenColor(colors.primary, 20),\n                secondary: colors.secondary || this.adjustColorBrightness(colors.primary, -15),\n                background: colors.background || '#ffffff',\n                text: colors.text || this.getContrastingTextColor(colors.background || '#ffffff'),\n                border: colors.border || this.adjustColorBrightness(colors.background || '#ffffff', -8),\n                button: colors.button || colors.primary,\n                link: colors.link || colors.primary,\n                accent: colors.accent || colors.primary,\n                userBg: colors.primary,\n                botBg: this.generateBotBackgroundColor(colors),\n                headerBg: colors.primary,\n                headerText: this.getContrastingTextColor(colors.primary)\n            };\n            return this.ensureAccessibleColors(themeColors);\n        }\n        return this.getDefaultThemeColors();\n    }\n\n    getDefaultThemeColors() {\n        return {\n            primary: '#667eea', primaryDark: '#5a6fd8', primaryLight: '#7c8bf0',\n            secondary: '#6c757d', background: '#ffffff', text: '#333333',\n            border: '#dee2e6', button: '#667eea', link: '#667eea', accent: '#667eea',\n            userBg: '#667eea', botBg: '#f1f3f5', headerBg: '#667eea', headerText: '#ffffff'\n        };\n    }\n\n    isWebsiteSpecificColor(color) {\n        if (!color) return false;\n        const normalizedColor = color.toLowerCase().trim();\n        const genericColors = [\n            '#ffffff', '#fff', 'white', '#000000', '#000', 'black', '#333333', '#333',\n            '#666666', '#666', '#999999', '#999', '#cccccc', '#ccc', '#f0f0f0', '#f5f5f5', '#fafafa',\n            '#007bff', '#0056b3', '#0d6efd', '#dc3545', '#28a745', '#ffc107',\n            '#17a2b8', '#6c757d', '#343a40', '#667eea', '#764ba2'\n        ];\n        if (genericColors.includes(normalizedColor)) return false;\n        if (this.isColorTooLight(normalizedColor) || this.isColorTooDark(normalizedColor)) return false;\n        return this.hasGoodSaturation(normalizedColor);\n    }\n\n    isColorTooLight(color) {\n        const hex = color.replace('#', '');\n        if (hex.length !== 6) return false;\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n        return luminance > 0.9;\n    }\n\n    isColorTooDark(color) {\n        const hex = color.replace('#', '');\n        if (hex.length !== 6) return false;\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n        return luminance < 0.1;\n    }\n\n    hasGoodSaturation(color) {\n        const hex = color.replace('#', '');\n        if (hex.length !== 6) return false;\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const max = Math.max(r, g, b);\n        const min = Math.min(r, g, b);\n        const saturation = max === 0 ? 0 : (max - min) / max;\n        return saturation > 0.15;\n    }\n\n    generateBotBackgroundColor(colors) {\n        if (colors.secondary && colors.secondary !== colors.primary) {\n            return this.lightenColor(colors.secondary, 60);\n        } else if (colors.primary) {\n            return this.lightenColor(colors.primary, 75);\n        }\n        return '#f1f3f5';\n    }\n\n    getContrastingTextColor(backgroundColor) {\n        return this.isLightColor(backgroundColor) ? '#ffffff' : '#2d3748';\n    }\n\n    ensureAccessibleColors(colors) {\n        if (this.isLightColor(colors.background) && this.isLightColor(colors.text)) {\n            colors.text = '#2d3748';\n        } else if (this.isDarkColor(colors.background) && this.isDarkColor(colors.text)) {\n            colors.text = '#f7fafc';\n        }\n        if (this.isLightColor(colors.botBg) && this.isLightColor(colors.text)) {\n            colors.botBg = '#f8f9fa';\n        } else if (this.isDarkColor(colors.botBg) && this.isDarkColor(colors.text)) {\n            colors.botBg = '#e2e8f0';\n        }\n        if (this.isColorTooSimilar(colors.primary, colors.background)) {\n            colors.primary = this.isLightColor(colors.background) ? '#4299e1' : '#63b3ed';\n        }\n        return colors;\n    }\n\n    isLightColor(color) {\n        if (!color || color === 'transparent') return true;\n        if (color.startsWith('#')) {\n            const hex = color.slice(1);\n            const r = parseInt(hex.substr(0, 2), 16);\n            const g = parseInt(hex.substr(2, 2), 16);\n            const b = parseInt(hex.substr(4, 2), 16);\n            const brightness = (r * 299 + g * 587 + b * 114) / 1000;\n            return brightness > 155;\n        }\n        return true;\n    }\n\n    isDarkColor(color) {\n        return !this.isLightColor(color);\n    }\n\n    isColorTooSimilar(color1, color2) {\n        if (!color1 || !color2 || !color1.startsWith('#') || !color2.startsWith('#')) return false;\n        const hex1 = color1.slice(1);\n        const hex2 = color2.slice(1);\n        const r1 = parseInt(hex1.substr(0, 2), 16), g1 = parseInt(hex1.substr(2, 2), 16), b1 = parseInt(hex1.substr(4, 2), 16);\n        const r2 = parseInt(hex2.substr(0, 2), 16), g2 = parseInt(hex2.substr(2, 2), 16), b2 = parseInt(hex2.substr(4, 2), 16);\n        const distance = Math.sqrt(Math.pow(r2 - r1, 2) + Math.pow(g2 - g1, 2) + Math.pow(b2 - b1, 2));\n        return distance < 100;\n    }\n\n    async autoDetectAndLoadTheme(fileId) {\n        try {\n            if (this.options.themeStyle === 'default') {\n                return false;\n            }\n            const themeLoaded = await this.loadWebsiteTheme(fileId);\n            if (themeLoaded) {\n                this.options.themeStyle = 'website';\n                return true;\n            } else {\n                this.options.themeStyle = 'default';\n                this.websiteTheme = null;\n                this.createStyles();\n                return false;\n            }\n        } catch (error) {\n            console.error('âŒ Error in auto-detect theme:', error);\n            this.options.themeStyle = 'default';\n            this.websiteTheme = null;\n            this.createStyles();\n            return false;\n        }\n    }\n\n    async loadWebsiteTheme(fileId) {\n        try {\n            const timestamp = new Date().getTime();\n            const response = await fetch(`${this.baseUrl}/theme/${fileId}?t=${timestamp}`, {\n                method: 'GET',\n                headers: { 'Content-Type': 'application/json', 'x-api-key': this.apiKey }\n            });\n            const data = await response.json();\n            if (data.success && data.data && data.data.colors) {\n                this.websiteTheme = data.data;\n                this.createStyles();\n                return true;\n            } else {\n                return false;\n            }\n        } catch (error) {\n            console.error('âŒ Error loading website theme:', error);\n            return false;\n        }\n    }\n\n    darkenColor(color, percent) {\n        if (!color || !color.startsWith('#')) return color;\n        const hex = color.slice(1);\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const factor = (100 - percent) / 100;\n        const newR = Math.round(r * factor);\n        const newG = Math.round(g * factor);\n        const newB = Math.round(b * factor);\n        return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;\n    }\n\n    lightenColor(color, percent) {\n        if (!color || !color.startsWith('#')) return color;\n        const hex = color.slice(1);\n        const r = parseInt(hex.substr(0, 2), 16);\n        const g = parseInt(hex.substr(2, 2), 16);\n        const b = parseInt(hex.substr(4, 2), 16);\n        const factor = percent / 100;\n        const newR = Math.round(r + (255 - r) * factor);\n        const newG = Math.round(g + (255 - g) * factor);\n        const newB = Math.round(b + (255 - b) * factor);\n        return `#${newR.toString(16).padStart(2, '0')}${newG.toString(16).padStart(2, '0')}${newB.toString(16).padStart(2, '0')}`;\n    }\n\n    adjustColorBrightness(hex, percent) {\n        if (!hex || !hex.startsWith('#')) return hex;\n        hex = hex.replace('#', '');\n        const num = parseInt(hex, 16);\n        const amt = Math.round(2.55 * percent);\n        const R = (num >> 16) + amt;\n        const G = (num >> 8 & 0x00FF) + amt;\n        const B = (num & 0x0000FF) + amt;\n        return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 + (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 + (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);\n    }\n}\n\nexport default ChatBot;","import ChatBot from './ChatBot.js';\n\n// Auto-initialization function\nfunction initializeChatBot() {\n    // Find the script tag that loaded this SDK\n    const scripts = document.querySelectorAll('script[data-api-key]');\n    const currentScript = scripts[scripts.length - 1]; // Get the last script with data-api-key\n    \n    if (!currentScript) {\n        console.error('ChatBot SDK: No script tag found with data-api-key attribute');\n        return;\n    }\n    \n    const apiKey = currentScript.getAttribute('data-api-key');\n    \n    if (!apiKey) {\n        console.error('ChatBot SDK: API key is required. Add data-api-key=\"YOUR_API_KEY\" to the script tag.');\n        return;\n    }\n    \n    console.log('ðŸ”§ Initializing ChatBot SDK with API-only configuration...');\n    \n    // Only get baseUrl from data attributes - everything else comes from API\n    const config = {\n        baseUrl: currentScript.getAttribute('data-base-url') || undefined\n    };\n    \n    // Initialize the chatbot\n    try {\n        const chatbot = new ChatBot(apiKey, config);\n        \n        // Make chatbot globally accessible\n        window.ChatFlowAI = chatbot;\n        \n        // Dispatch ready event\n        const event = new CustomEvent('chatflow-ready', {\n            detail: { chatbot }\n        });\n        document.dispatchEvent(event);\n        \n        console.log('ChatFlow AI SDK initialized successfully - all settings loaded from API');\n    } catch (error) {\n        console.error('ChatBot SDK: Failed to initialize:', error);\n    }\n}\n\n// Initialize when DOM is ready\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', initializeChatBot);\n} else {\n    // DOM is already ready\n    initializeChatBot();\n}\n\n// Export for manual initialization if needed\nexport { ChatBot, initializeChatBot };\nexport default ChatBot;\n\n// Log initialization method\nconsole.log('ðŸ“¦ ChatFlow AI SDK loaded - Configuration will be fetched from API');"],"names":["ChatBot","apiKey","_this","options","arguments","length","undefined","_classCallCheck","isLocalhost","window","location","hostname","includes","defaultBaseUrl","baseUrl","isOpen","currentFileId","chatHistory","selectedFileId","selectedSiteName","websiteTheme","_objectSpread","position","theme","themeStyle","title","placeholder","preselectedSite","init","setupConfigRefresh","ChatFlowRefresh","console","log","refreshConfiguration","_createClass","key","value","_this2","configRefreshInterval","setInterval","_asyncToGenerator","_regenerator","m","_callee","_t","w","_context","p","n","v","warn","a","document","addEventListener","hidden","_refreshConfiguration","_callee2","timestamp","response","data","newConfig","configChanged","_t2","_context2","Date","getTime","fetch","concat","method","headers","json","success","hasConfigurationChanged","applyNewConfiguration","showUpdateNotification","debug","apply","_this$sdkConfig$selec","_newConfig$selectedWe","_this$sdkConfig$integ","_newConfig$integratio","sdkConfig","oldWebsiteId","selectedWebsite","id","newWebsiteId","oldThemeChoice","integration","themeChoice","newThemeChoice","oldThemeData","JSON","stringify","themeData","newThemeData","_applyNewConfiguration","_callee3","customizations","titleElement","inputElement","firstSite","_context3","widget","className","querySelector","textContent","disabled","enableInput","clearChat","availableWebsites","showNoSitesMessage","createStyles","_x","_init","_callee4","isValidKey","_context4","createChatWidget","bindEvents","validateApiKey","loadSdkConfiguration","showApiKeyError","_validateApiKey","_callee5","_t3","_context5","replace","error","messages","innerHTML","input","send","selector","style","display","themeColors","getThemeColors","styles","primary","primaryDark","primaryLight","secondary","background","text","border","button","link","accent","userBg","botBg","headerBg","headerText","existingStyles","getElementById","remove","styleSheet","createElement","head","appendChild","updateStyles","body","_this3","toggle","close","toggleChat","closeChat","sendMessage","e","shiftKey","preventDefault","container","classList","focus","_sendMessage","_callee6","message","_t4","_context6","trim","addMessage","showLoading","fileId","hideLoading","sender","formatBotMessage","scrollTop","scrollHeight","push","formatted","cleanupAIResponse","processMarkdownLinks","escapeHtmlExceptLinks","processMarkdownHeaders","processBulletPoints","processNumberedLists","processMarkdownTables","_this4","linkRegex","parts","split","map","part","test","escapeHtml","join","lines","inList","result","i","line","startsWith","content","substring","inTable","tableRows","cells","cell","filter","renderTable","rows","html","forEach","unsafe","loading","messagesContainer","sendButton","_selectSite","_callee7","siteName","siteUrl","_context7","autoDetectAndLoadTheme","selectSite","_x2","_x3","_x4","welcomeMessage","open","add","destroy","clearInterval","_loadSdkConfiguration","_callee8","config","_config$integration$c","_t5","_context8","colors","hasValidPrimary","isWebsiteSpecificColor","getDefaultThemeColors","darkenColor","lightenColor","adjustColorBrightness","getContrastingTextColor","generateBotBackgroundColor","ensureAccessibleColors","color","normalizedColor","toLowerCase","genericColors","isColorTooLight","isColorTooDark","hasGoodSaturation","hex","r","parseInt","substr","g","b","luminance","max","Math","min","saturation","backgroundColor","isLightColor","isDarkColor","isColorTooSimilar","slice","brightness","color1","color2","hex1","hex2","r1","g1","b1","r2","g2","b2","distance","sqrt","pow","_autoDetectAndLoadTheme","_callee9","themeLoaded","_t6","_context9","loadWebsiteTheme","_x5","_loadWebsiteTheme","_callee0","_t7","_context0","_x6","percent","factor","newR","round","newG","newB","toString","padStart","num","amt","R","G","B","initializeChatBot","scripts","querySelectorAll","currentScript","getAttribute","chatbot","ChatFlowAI","event","CustomEvent","detail","dispatchEvent","readyState"],"mappings":"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"}